@import "../tokens/dist/tokens.css";
@import "tailwindcss";

@layer base {
  :root {
    font-family: var(--font-family-sans);
    min-height: 100%;
  }

  html,
  body {
    min-height: 100%;
  }

  body {
    @apply bg-base-200 text-base-content antialiased;
  }

  #root {
    min-height: 100%;
  }
}

@layer components {
  .customize-segment {
    @apply rounded-xl border border-base-300/70 bg-base-200/60 p-4 text-left text-sm font-medium text-base-content/80 shadow-sm shadow-base-300/20 transition;
  }

  .customize-segment:focus-visible {
    @apply outline-none ring-2 ring-accent/50;
  }

  .customize-segment[data-state="on"] {
    @apply border-accent bg-accent/15 text-accent-content;
    box-shadow:
      0 1px 3px 0 color-mix(in oklab, var(--color-accent) 20%, transparent),
      0 1px 2px -1px color-mix(in oklab, var(--color-accent) 20%, transparent);
  }

  /* Card affordance for list items that open POI sheets; keeps hover/focus feedback consistent. */
  .poi-list__item {
    @apply w-full rounded-2xl border border-base-300/60 bg-base-200/70 p-4 text-left text-base-content shadow-sm shadow-base-300/30 transition;
  }

  .poi-list__item:hover {
    @apply border-accent;
  }

  .poi-list__item:focus-visible {
    @apply outline-none ring-2 ring-accent/60;
  }

  /* Sheet surface for detailed POI content, reused whenever map overlays need a panel shell. */
  .poi-sheet {
    @apply max-h-[min(80vh,32rem)] w-full max-w-md overflow-y-auto rounded-3xl border border-base-300/60 bg-base-100 p-6 text-base-content shadow-2xl;
  }

  /* Frosted map overlay base, used for bottom sheets across map variants. */
  .map-panel {
    @apply pointer-events-auto rounded-3xl border border-base-300/60 text-base-100 shadow-2xl;
    background-color: rgba(24, 38, 52, 0.68);
    background-image: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.08) 0%,
      rgba(255, 255, 255, 0) 100%
    );
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
  }

  @supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
    .map-panel {
      background-color: rgba(24, 38, 52, 0.85);
      background-image: none;
    }
  }

  .map-panel--stacked {
    @apply relative flex flex-col overflow-hidden;
  }

  .map-panel--scroll {
    @apply overflow-y-auto;
  }

  .dialog-surface {
    @apply fixed inset-0 m-auto flex h-fit w-80 flex-col gap-4 rounded-2xl border border-base-300/60 bg-base-100 p-6 shadow-2xl;
  }

  .wizard-step__interest-chip {
    @apply flex items-center gap-2 rounded-full border border-base-300/60 bg-base-200/60 px-4 py-2 text-sm font-medium text-base-content/70 transition;
  }

  .wizard-step__interest-chip:focus-visible {
    @apply outline-none ring-2 ring-accent/60;
  }

  .wizard-step__interest-chip[data-state="on"] {
    @apply border-accent bg-accent text-accent-content;
  }

  .wizard-step__interest-chip[data-state="on"] .tabler-icon {
    @apply text-base-100;
  }

  .preference-toggle {
    @apply flex items-center justify-between rounded-2xl border border-base-300/60 bg-base-200/40 px-4 py-3;
  }

  .toggle-switch {
    @apply relative inline-flex h-6 w-11 items-center rounded-full border border-base-300/60 bg-base-300/60 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent/60 focus-visible:ring-offset-2 focus-visible:ring-offset-base-100;
  }

  .toggle-switch--muted {
    @apply bg-base-200/60;
  }

  .toggle-switch--accent {
    @apply data-[state=checked]:bg-accent/80;
  }

  .toggle-switch__thumb {
    @apply block h-5 w-5 translate-x-0.5 rounded-full bg-base-100 shadow transition data-[state=checked]:translate-x-[22px];
  }
}
